const fs = require('fs-extra')

const Deployer = require('./deployer')
const Configuration = require('./configuration')

async function main(configPath) {
  let config
  try {
    config = await fs.readJson(configPath)
  } catch (e) {
    throw e
  }

  const conf = new Configuration(config)

  let deployer = new Deployer(conf)
  deployer.openConnection()
  deployer.run()
}

module.exports = main


